/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /gh/mickael-kerjean/codemirror-orgmode@master/orgmode-mode.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}((function(e){"use strict";function t(e,t){const n={line:t,ch:0};isFold(e,n)?unfold(e,n):fold(e,n)}e.defineSimpleMode("orgmode",{start:[{regex:/(\*\s)(TODO|DOING|WAITING|NEXT|PENDING|)(CANCELLED|CANCELED|CANCEL|DONE|REJECTED|STOP|STOPPED|)(\s+\[\#[A-C]\]\s+|)(.*?)(?:(\s{10,}|))(\:[\S]+\:|)$/,sol:!0,token:["header level1 org-level-star","header level1 org-todo","header level1 org-done","header level1 org-priority","header level1","header level1 void","header level1 comment"]},{regex:/(\*{1,}\s)(TODO|DOING|WAITING|NEXT|PENDING|)(CANCELLED|CANCELED|CANCEL|DEFERRED|DONE|REJECTED|STOP|STOPPED|)(\s+\[\#[A-C]\]\s+|)(.*?)(?:(\s{10,}|))(\:[\S]+\:|)$/,sol:!0,token:["header org-level-star","header org-todo","header org-done","header org-priority","header","header void","header comment"]},{regex:/(\+[^\+]+\+)/,token:["strikethrough"]},{regex:/(\*[^\*]+\*)/,token:["strong"]},{regex:/(\/[^\/]+\/)/,token:["em"]},{regex:/(\_[^\_]+\_)/,token:["link"]},{regex:/(\~[^\~]+\~)/,token:["comment"]},{regex:/(\=[^\=]+\=)/,token:["comment"]},{regex:/\[\[[^\[\]]+\]\[[^\[\]]+\]\]/,token:"org-url"},{regex:/\[\[[^\[\]]+\]\]/,token:"org-image"},{regex:/\[[xX\s\-\_]\]/,token:"qualifier org-toggle"},{regex:/\#\+(?:(BEGIN|begin))_[a-zA-Z]*/,token:"comment",next:"env",sol:!0},{regex:/:?[A-Z_]+\:.*/,token:"comment",sol:!0},{regex:/(\#\+[a-zA-Z_]*)(\:.*)/,token:["keyword","qualifier"],sol:!0},{regex:/(CLOCK\:|SHEDULED\:|DEADLINE\:)(\s.+)/,token:["comment","keyword"]}],env:[{regex:/\#\+(?:(END|end))_[a-zA-Z]*/,token:"comment",next:"start",sol:!0},{regex:/.*/,token:"comment"}]}),e.registerHelper("fold","orgmode",(function(t,n){const o=l(n.line);if(null===o)return;const r=t.lastLine();let i=n.line;for(;i<r;){i+=1;let e=l(i);if(e&&e<=o){i-=1;break}}return{from:e.Pos(n.line,t.getLine(n.line).length),to:e.Pos(i,t.getLine(i).length)};function l(n){var o=t.getLine(n),r=/^\*+/.exec(o);return r&&1===r.length&&/header/.test(t.getTokenTypeAt(e.Pos(n,0)))?r[0].length:null}})),e.registerGlobalHelper("fold","drawer",(function(e){return"orgmode"===e.name}),(function(t,n){if(!1===function(e){var n=t.getLine(e),o=/^\:.*\:$/.exec(n);if(o&&1===o.length&&":END:"!==o[0])return!0;return!1}(n.line))return;const o=t.lastLine();let r=n.line;for(;r<o&&(r+=1,i=r,void 0,":END:"!==t.getLine(i).trim()););var i;return{from:e.Pos(n.line,t.getLine(n.line).length),to:e.Pos(r,t.getLine(r).length)}})),e.registerHelper("orgmode","init",((n,r)=>(n.setOption("extraKeys",{Tab:function(e){org_cycle(e)},"Shift-Tab":function(e){r("shifttab",org_shifttab(e))},"Alt-Left":function(e){org_metaleft(e)},"Alt-Right":function(e){org_metaright(e)},"Alt-Enter":function(e){org_meta_return(e)},"Alt-Up":function(e){org_metaup(e)},"Alt-Down":function(e){org_metadown(e)},"Shift-Alt-Left":function(e){org_shiftmetaleft(e)},"Shift-Alt-Right":function(e){org_shiftmetaright(e)},"Shift-Alt-Enter":function(e){org_insert_todo_heading(e)},"Shift-Left":function(e){org_shiftleft(e)},"Shift-Right":function(e){org_shiftright(e)}}),r("shifttab",org_set_fold(n)),n.on("mousedown",o),n.on("touchstart",o),n.on("gutterClick",t),n.operation((function(){for(var t=0;t<n.lineCount();t++)!1===/header/.test(n.getTokenTypeAt(e.Pos(t,0)))&&fold(n,e.Pos(t,0))})),e.orgmode.destroy.bind(this,n)))),e.registerHelper("orgmode","destroy",(e=>{e.off("mousedown",o),e.off("touchstart",o),e.off("gutterClick",t)}));let n=[];function o(e,t){const o=e.coordsChar({left:t.clientX||t.targetTouches&&t.targetTouches[0].clientX,top:t.clientY||t.targetTouches&&t.targetTouches[0].clientY},"page"),r=e.getTokenAt(o);function i(){"ontouchstart"in window&&t.preventDefault()}function l(){e.on("beforeSelectionChange",(function e(t,n){n.update([{anchor:o,head:o}]),t.off("beforeSelectionChange",e)}))}l(),/org-level-star/.test(r.type)?(i(),function(){const t=o.line;if(t>=0){const n={line:t,ch:0};isFold(e,n)?unfold(e,n):fold(e,n)}}(),l()):/org-toggle/.test(r.type)?(i(),function(){const t=o.line,n=e.getRange({line:t,ch:r.start},{line:t,ch:r.end});let i="[X]"===n||"[x]"===n?"[ ]":"[X]";e.replaceRange(i,{line:t,ch:r.start},{line:t,ch:r.end})}(),l()):/org-todo/.test(r.type)?(i(),function(){const t=o.line;e.replaceRange("DONE",{line:t,ch:r.start},{line:t,ch:r.end})}(),l()):/org-done/.test(r.type)?(i(),function(){const t=o.line;e.replaceRange("TODO",{line:t,ch:r.start},{line:t,ch:r.end})}(),l()):/org-priority/.test(r.type)?(i(),function(){const t=[" [#A] "," [#B] "," [#C] "," [#A] "],n=o.line,i=e.getRange({line:n,ch:r.start},{line:n,ch:r.end});let l=t[t.indexOf(i)+1];e.replaceRange(l,{line:n,ch:r.start},{line:n,ch:r.end})}(),l()):/org-url/.test(r.type)?(l(),function(){r.string.match(/\[\[(.*?)\]\[/);const e=RegExp.$1;if(!e)return;if(/^https?\:\/\//.test(e))window.open(e);else{const t=dirname(window.location.pathname.replace(/^\/view/,"")),n=e;window.open("/view"+pathBuilder(t,n))}}()):/org-image/.test(r.type)&&(l(),function(){if(!1==!!n.filter((e=>e===o.line))[0]){if(!r.string.match(/\[\[(.*)\]\]/))return null;let l=i(RegExp.$1);const c=e.addLineWidget(o.line,l,{coverGutter:!1});function t(){c.clear(),l.removeEventListener("click",t),n=n.filter((e=>e!==o.line))}n.push(o.line),l.addEventListener("click",t)}function i(e){let t=document.createElement("div"),n=document.createElement("img");if(/^https?\:\/\//.test(e))n.src=e;else{const t=dirname(window.location.pathname.replace(/^\/view/,"")),o=e;n.src="/api/files/cat?path="+encodeURIComponent(pathBuilder(t,o))}return t.appendChild(n),t}}())}e.defineMIME("text/org","org")}));
//# sourceMappingURL=/sm/3fc621fc1dc39d557c833d8279f516c18c1f193a0025ca36ab3ce9fe6e721f92.map